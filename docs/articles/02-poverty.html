<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poverty Indices • convey</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Poverty Indices">
<meta property="og:description" content="convey">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">convey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-Introduction.html">01- Poverty and Inequality with Complex Survey Data</a>
    </li>
    <li>
      <a href="../articles/02-poverty.html">Poverty Indices</a>
    </li>
    <li>
      <a href="../articles/03-inequality.html">Inequality Measurement </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ajdamico/convey/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Poverty Indices</h1>
                        <h4 data-toc-skip class="author">Guilherme
Jacob, Anthony Damico, and Djalma Pessoa</h4>
            
            <h4 data-toc-skip class="date">2022-09-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ajdamico/convey/blob/HEAD/vignettes/02-poverty.Rmd" class="external-link"><code>vignettes/02-poverty.Rmd</code></a></small>
      <div class="hidden name"><code>02-poverty.Rmd</code></div>

    </div>

    
    
<p>Poverty is an issue discussed since long time ago. As <span class="citation">Ravallion (2016)</span> points out, Aristotle and
Confucius discussed ideas about poverty. In fact, Aristotle’s ideas
influenced Thomas Aquinas, one of the pillars of Western philosophy.
Since then, societies changed, modifying the theories of justice
underlying the idea of poverty.</p>
<p>As the concept and the ethics towards poverty change, so does its
measurement. From basic measures like the headcount rate to more complex
metrics, such as the FGT index, poverty measurement evolved. Nowadays,
poverty measures estimates are calculated using household surveys and
censuses <span class="citation">(Deaton 1997)</span>. Yet, only recently
the aspects of statistical inference combining such measures and survey
designs were explored<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. These advances become even more important
given the recent efforts in poverty mapping, an analytical method that
combined poverty analysis and small area estimation, like <span class="citation">Elbers, Lanjouw, and Lanjouw (2003)</span> and <span class="citation">Bedi, Coudouel, and Simler (2007)</span>.</p>
<p>The following subsections shows how poverty estimates and their
sampling errors can be estimated using simple commands from the
<code>convey</code> package.</p>
<div class="section level2">
<h2 id="at-risk-of-poverty-threshold-svyarpt">At Risk of Poverty Threshold (svyarpt)<a class="anchor" aria-label="anchor" href="#at-risk-of-poverty-threshold-svyarpt"></a>
</h2>
<p>The at-risk-of-poverty threshold (ARPT) is a measure used to define
the people whose incomes imply a low standard of living in comparison to
the general living standards. I.e., even though some people are not
below the effective poverty line, those below the ARPT can be considered
“almost deprived”.</p>
<p>This measure is defined as <span class="math inline">\(0.6\)</span>
times the median income for the entire population:</p>
<p><span class="math display">\[
arpt = 0.6 \times median(y),
\]</span> where, <span class="math inline">\(y\)</span> is the income
variable and <code>median</code> is estimated for the whole population.
The details of the linearization of the <code>arpt</code> are discussed
by <span class="citation">Deville (1999)</span> and <span class="citation">Osier (2009)</span>.</p>
<hr>
<p><strong>A replication example</strong></p>
<p>The R <code>vardpoor</code> package <span class="citation">(Breidaks,
Liberts, and Ivanova 2016)</span>, created by researchers at the Central
Statistical Bureau of Latvia, includes a arpt coefficient calculation
using the ultimate cluster method. The example below reproduces those
statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: grid</span></span>
<span><span class="co">#&gt; Loading required package: Matrix</span></span>
<span><span class="co">#&gt; Loading required package: survival</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'survey'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:graphics':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     dotchart</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://csblatvia.github.io/vardpoor/" class="external-link">vardpoor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the laeken library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">laeken</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make all column names lowercase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a column with the row number</span></span>
<span><span class="va">dati</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>IDd <span class="op">=</span> <span class="fl">1</span> <span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>, <span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the arpt coefficient</span></span>
<span><span class="co"># using the R vardpoor library</span></span>
<span><span class="va">varpoord_arpt_calculation</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/vardpoor/man/varpoord.html" class="external-link">varpoord</a></span><span class="op">(</span></span>
<span>    </span>
<span>        <span class="co"># analysis variable</span></span>
<span>        Y <span class="op">=</span> <span class="st">"eqincome"</span>, </span>
<span>        </span>
<span>        <span class="co"># weights variable</span></span>
<span>        w_final <span class="op">=</span> <span class="st">"rb050"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level1 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level2 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># strata variable</span></span>
<span>        H <span class="op">=</span> <span class="st">"db040"</span>, </span>
<span>        </span>
<span>        N_h <span class="op">=</span> <span class="cn">NULL</span> ,</span>
<span>        </span>
<span>        <span class="co"># clustering variable</span></span>
<span>        PSU <span class="op">=</span> <span class="st">"rb030"</span>, </span>
<span>        </span>
<span>        <span class="co"># data.table</span></span>
<span>        dataset <span class="op">=</span> <span class="va">dati</span>, </span>
<span>        </span>
<span>        <span class="co"># arpt coefficient function</span></span>
<span>        type <span class="op">=</span> <span class="st">"linarpt"</span>,</span>
<span>      </span>
<span>      <span class="co"># poverty threshold range</span></span>
<span>      order_quant <span class="op">=</span> <span class="fl">50L</span> ,</span>
<span>      </span>
<span>        <span class="co"># get linearized variable</span></span>
<span>      outp_lin <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># using our recommended setup</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the convey_prep function on it</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># coefficients do match</span></span>
<span><span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="co">#&gt; [1] 10859.24</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt; eqincome </span></span>
<span><span class="co">#&gt; 10859.24</span></span>
<span></span>
<span><span class="co"># linearized variables do match</span></span>
<span><span class="co"># vardpoor</span></span>
<span><span class="va">lin_arpt_varpoord</span><span class="op">&lt;-</span> <span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">lin_out</span><span class="op">$</span><span class="va">lin_arpt</span></span>
<span><span class="co"># convey </span></span>
<span><span class="va">lin_arpt_convey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span>,<span class="st">"lin"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check equality</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">lin_arpt_varpoord</span>, <span class="va">lin_arpt_convey</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># variances do not match exactly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 2564.027</span></span>
<span><span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 2559.442</span></span>
<span></span>
<span><span class="co"># standard errors do not match exactly</span></span>
<span><span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 50.59093</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 50.63622</span></span></code></pre></div>
<p>The variance estimate is computed by using the approximation defined
in @ref(eq:var), where the linearized variable <span class="math inline">\(z\)</span> is defined by @ref(eq:lin). The
functions <code><a href="../reference/svyarpt.html">convey::svyarpt</a></code> and
<code><a href="https://rdrr.io/pkg/vardpoor/man/linarpt.html" class="external-link">vardpoor::linarpt</a></code> produce the same linearized variable
<span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because
<code><a href="https://csblatvia.github.io/vardpoor/" class="external-link">library(vardpoor)</a></code> defaults to an ultimate cluster method
that can be replicated with an alternative setup of the
<code>survey.design</code> object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># within each strata, sum up the weights</span></span>
<span><span class="va">cluster_sums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">rb050</span> , <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span> <span class="op">)</span> , <span class="va">sum</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">cluster_sums</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"db040"</span> , <span class="st">"cluster_sum"</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># merge this column back onto the data.frame</span></span>
<span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span> <span class="va">eusilc</span> , <span class="va">cluster_sums</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># with the fpc using the cluster sum</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span> , </span>
<span>        fpc <span class="op">=</span> <span class="op">~</span> <span class="va">cluster_sum</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 2559.442</span></span>
<span><span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 2559.442</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="va">varpoord_arpt_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 50.59093</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpt.html">svyarpt</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 50.59093</span></span></code></pre></div>
<p>For additional usage examples of <code>svyarpt</code>, type
<code><a href="../reference/svyarpt.html">?convey::svyarpt</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="at-risk-of-poverty-ratio-svyarpr">At Risk of Poverty Ratio (svyarpr)<a class="anchor" aria-label="anchor" href="#at-risk-of-poverty-ratio-svyarpr"></a>
</h2>
<p>The at-risk-of-poverty rate (ARPR) is the share of persons with an
income below the at-risk-of-poverty threshold (<code>arpt</code>). The
logic behind this measure is that although most people below the ARPT
cannot be considered “poor”, they are the ones most vulnerable to
becoming poor in the event of a negative economic phenomenon.</p>
<p>The ARPR is a composite estimate, taking into account both the
sampling error in the proportion itself and that in the ARPT estimate.
The details of the linearization of the <code>arpr</code> and are
discussed by <span class="citation">Deville (1999)</span> and <span class="citation">Osier (2009)</span>.</p>
<hr>
<p><strong>A replication example</strong></p>
<p>The R <code>vardpoor</code> package <span class="citation">(Breidaks,
Liberts, and Ivanova 2016)</span>, created by researchers at the Central
Statistical Bureau of Latvia, includes a ARPR coefficient calculation
using the ultimate cluster method. The example below reproduces those
statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://csblatvia.github.io/vardpoor/" class="external-link">vardpoor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">laeken</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make all column names lowercase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a column with the row number</span></span>
<span><span class="va">dati</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>IDd <span class="op">=</span> <span class="fl">1</span> <span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>, <span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the arpr coefficient</span></span>
<span><span class="co"># using the R vardpoor library</span></span>
<span><span class="va">varpoord_arpr_calculation</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/vardpoor/man/varpoord.html" class="external-link">varpoord</a></span><span class="op">(</span></span>
<span>    </span>
<span>        <span class="co"># analysis variable</span></span>
<span>        Y <span class="op">=</span> <span class="st">"eqincome"</span>, </span>
<span>        </span>
<span>        <span class="co"># weights variable</span></span>
<span>        w_final <span class="op">=</span> <span class="st">"rb050"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level1 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level2 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># strata variable</span></span>
<span>        H <span class="op">=</span> <span class="st">"db040"</span>, </span>
<span>        </span>
<span>        N_h <span class="op">=</span> <span class="cn">NULL</span> ,</span>
<span>        </span>
<span>        <span class="co"># clustering variable</span></span>
<span>        PSU <span class="op">=</span> <span class="st">"rb030"</span>, </span>
<span>        </span>
<span>        <span class="co"># data.table</span></span>
<span>        dataset <span class="op">=</span> <span class="va">dati</span>, </span>
<span>        </span>
<span>        <span class="co"># arpr coefficient function</span></span>
<span>        type <span class="op">=</span> <span class="st">"linarpr"</span>,</span>
<span>      </span>
<span>      <span class="co"># poverty threshold range</span></span>
<span>      order_quant <span class="op">=</span> <span class="fl">50L</span> ,</span>
<span>          </span>
<span>      <span class="co"># get linearized variable</span></span>
<span>      outp_lin <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        </span>
<span>    <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># using our recommended setup</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the convey_prep function on it</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># coefficients do match</span></span>
<span><span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="co">#&gt; [1] 14.44422</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt; eqincome </span></span>
<span><span class="co">#&gt; 14.44422</span></span>
<span></span>
<span><span class="co"># linearized variables do match</span></span>
<span><span class="co"># vardpoor</span></span>
<span><span class="va">lin_arpr_varpoord</span><span class="op">&lt;-</span> <span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">lin_out</span><span class="op">$</span><span class="va">lin_arpr</span></span>
<span><span class="co"># convey </span></span>
<span><span class="va">lin_arpr_convey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span>,<span class="st">"lin"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check equality</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">lin_arpr_varpoord</span>,<span class="fl">100</span><span class="op">*</span><span class="va">lin_arpr_convey</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Mean relative difference: 0.2264738"</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># variances do not match exactly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">10000</span></span>
<span><span class="co">#&gt;            eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.07599778</span></span>
<span><span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.08718569</span></span>
<span></span>
<span><span class="co"># standard errors do not match exactly</span></span>
<span><span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.2952722</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.2756769</span></span></code></pre></div>
<p>The variance estimate is computed by using the approximation defined
in @ref(eq:var), where the linearized variable <span class="math inline">\(z\)</span> is defined by @ref(eq:lin). The
functions <code><a href="../reference/svyarpr.html">convey::svyarpr</a></code> and
<code><a href="https://rdrr.io/pkg/vardpoor/man/linarpr.html" class="external-link">vardpoor::linarpr</a></code> produce the same linearized variable
<span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because
<code><a href="https://csblatvia.github.io/vardpoor/" class="external-link">library(vardpoor)</a></code> defaults to an ultimate cluster method
that can be replicated with an alternative setup of the
<code>survey.design</code> object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># within each strata, sum up the weights</span></span>
<span><span class="va">cluster_sums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">rb050</span> , <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span> <span class="op">)</span> , <span class="va">sum</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">cluster_sums</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"db040"</span> , <span class="st">"cluster_sum"</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># merge this column back onto the data.frame</span></span>
<span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span> <span class="va">eusilc</span> , <span class="va">cluster_sums</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># with the fpc using the cluster sum</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span> , </span>
<span>        fpc <span class="op">=</span> <span class="op">~</span> <span class="va">cluster_sum</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">10000</span></span>
<span><span class="co">#&gt;            eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.07586194</span></span>
<span><span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.08718569</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="va">varpoord_arpr_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.2952722</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyarpr.html">svyarpr</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.2754305</span></span></code></pre></div>
<p>For additional usage examples of <code>svyarpr</code>, type
<code><a href="../reference/svyarpr.html">?convey::svyarpr</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="relative-median-income-ratio-svyrmir">Relative Median Income Ratio (svyrmir)<a class="anchor" aria-label="anchor" href="#relative-median-income-ratio-svyrmir"></a>
</h2>
<p>The relative median income ratio (rmir) is the ratio of the median
income of people aged above a value (65) to the median of people aged
below the same value. In mathematical terms,</p>
<p><span class="math display">\[
rmir = \frac{median\{y_i; age_i &gt;65 \}}{median\{y_i; age_i \leq 65
\}}.
\]</span></p>
<p>The details of the linearization of the <code>rmir</code> and are
discussed by <span class="citation">Deville (1999)</span> and <span class="citation">Osier (2009)</span>.</p>
<hr>
<p><strong>A replication example</strong></p>
<p>The R <code>vardpoor</code> package <span class="citation">(Breidaks,
Liberts, and Ivanova 2016)</span>, created by researchers at the Central
Statistical Bureau of Latvia, includes a rmir coefficient calculation
using the ultimate cluster method. The example below reproduces those
statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://csblatvia.github.io/vardpoor/" class="external-link">vardpoor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">laeken</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make all column names lowercase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a column with the row number</span></span>
<span><span class="va">dati</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>IDd <span class="op">=</span> <span class="fl">1</span> <span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>, <span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the rmir coefficient</span></span>
<span><span class="co"># using the R vardpoor library</span></span>
<span><span class="va">varpoord_rmir_calculation</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/vardpoor/man/varpoord.html" class="external-link">varpoord</a></span><span class="op">(</span></span>
<span>    </span>
<span>        <span class="co"># analysis variable</span></span>
<span>        Y <span class="op">=</span> <span class="st">"eqincome"</span>, </span>
<span>        </span>
<span>        <span class="co"># weights variable</span></span>
<span>        w_final <span class="op">=</span> <span class="st">"rb050"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level1 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level2 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>        </span>
<span>        <span class="co"># strata variable</span></span>
<span>        H <span class="op">=</span> <span class="st">"db040"</span>, </span>
<span>        </span>
<span>        N_h <span class="op">=</span> <span class="cn">NULL</span> ,</span>
<span>        </span>
<span>        <span class="co"># clustering variable</span></span>
<span>        PSU <span class="op">=</span> <span class="st">"rb030"</span>, </span>
<span>        </span>
<span>        <span class="co"># data.table</span></span>
<span>        dataset <span class="op">=</span> <span class="va">dati</span>,</span>
<span>      </span>
<span>      <span class="co"># age variable</span></span>
<span>      age <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>        </span>
<span>        <span class="co"># rmir coefficient function</span></span>
<span>        type <span class="op">=</span> <span class="st">"linrmir"</span>,</span>
<span>      </span>
<span>      <span class="co"># poverty threshold range</span></span>
<span>      order_quant <span class="op">=</span> <span class="fl">50L</span> ,</span>
<span>      </span>
<span>      <span class="co"># get linearized variable</span></span>
<span>      outp_lin <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        </span>
<span>    <span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># using our recommended setup</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the convey_prep function on it</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># coefficients do match</span></span>
<span><span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="co">#&gt; [1] 0.9330361</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span>, age <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">)</span> <span class="op">)</span> </span>
<span><span class="co">#&gt;  eqincome </span></span>
<span><span class="co">#&gt; 0.9330361</span></span>
<span></span>
<span><span class="co"># linearized variables do match</span></span>
<span><span class="co"># vardpoor</span></span>
<span><span class="va">lin_rmir_varpoord</span><span class="op">&lt;-</span> <span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">lin_out</span><span class="op">$</span><span class="va">lin_rmir</span></span>
<span><span class="co"># convey </span></span>
<span><span class="va">lin_rmir_convey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span>, age <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">)</span>,<span class="st">"lin"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check equality</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">lin_rmir_varpoord</span>, <span class="va">lin_rmir_convey</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># variances do not match exactly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span>, age <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> </span>
<span><span class="co">#&gt;             eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.000127444</span></span>
<span><span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.0001272137</span></span>
<span></span>
<span><span class="co"># standard errors do not match exactly</span></span>
<span><span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.0112789</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> , age <span class="op">=</span> <span class="op">~</span><span class="va">age</span><span class="op">)</span> <span class="op">)</span> </span>
<span><span class="co">#&gt;            eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.01128911</span></span></code></pre></div>
<p>The variance estimate is computed by using the approximation defined
in @ref(eq:var), where the linearized variable <span class="math inline">\(z\)</span> is defined by @ref(eq:lin). The
functions <code><a href="../reference/svyrmir.html">convey::svyrmir</a></code> and
<code><a href="https://rdrr.io/pkg/vardpoor/man/linrmir.html" class="external-link">vardpoor::linrmir</a></code> produce the same linearized variable
<span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because
<code><a href="https://csblatvia.github.io/vardpoor/" class="external-link">library(vardpoor)</a></code> defaults to an ultimate cluster method
that can be replicated with an alternative setup of the
<code>survey.design</code> object.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># within each strata, sum up the weights</span></span>
<span><span class="va">cluster_sums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">rb050</span> , <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span> <span class="op">)</span> , <span class="va">sum</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">cluster_sums</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"db040"</span> , <span class="st">"cluster_sum"</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># merge this column back onto the data.frame</span></span>
<span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span> <span class="va">eusilc</span> , <span class="va">cluster_sums</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># with the fpc using the cluster sum</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span> , </span>
<span>        fpc <span class="op">=</span> <span class="op">~</span> <span class="va">cluster_sum</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> , age <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> </span>
<span><span class="co">#&gt;              eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.0001272137</span></span>
<span><span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.0001272137</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="va">varpoord_rmir_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.0112789</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmir.html">svyrmir</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span>, age <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">)</span> <span class="op">)</span> </span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.0112789</span></span></code></pre></div>
<p>For additional usage examples of <code>svyrmir</code>, type
<code><a href="../reference/svyrmir.html">?convey::svyrmir</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="relative-median-poverty-gap-svyrmpg">Relative Median Poverty Gap (svyrmpg)<a class="anchor" aria-label="anchor" href="#relative-median-poverty-gap-svyrmpg"></a>
</h2>
<p>The relative median poverty gap (<code>rmpg</code>) is the relative
difference between the median income of people having income below the
<code>arpt</code> and the <code>arpt</code> itself:</p>
<p><span class="math display">\[
rmpg = \frac{median\{y_i, y_i&lt;arpt\}-arpt}{arpt}
\]</span> The details of the linearization of the <code>rmpg</code> are
discussed by <span class="citation">Deville (1999)</span> and <span class="citation">Osier (2009)</span>.</p>
<hr>
<p><strong>A replication example</strong></p>
<p>The R <code>vardpoor</code> package <span class="citation">(Breidaks,
Liberts, and Ivanova 2016)</span>, created by researchers at the Central
Statistical Bureau of Latvia, includes a rmpg coefficient calculation
using the ultimate cluster method. The example below reproduces those
statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://csblatvia.github.io/vardpoor/" class="external-link">vardpoor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">laeken</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make all column names lowercase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a column with the row number</span></span>
<span><span class="va">dati</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>IDd <span class="op">=</span> <span class="fl">1</span> <span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>, <span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the rmpg coefficient</span></span>
<span><span class="co"># using the R vardpoor library</span></span>
<span><span class="va">varpoord_rmpg_calculation</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/vardpoor/man/varpoord.html" class="external-link">varpoord</a></span><span class="op">(</span></span>
<span>    </span>
<span>        <span class="co"># analysis variable</span></span>
<span>        Y <span class="op">=</span> <span class="st">"eqincome"</span>, </span>
<span>        </span>
<span>        <span class="co"># weights variable</span></span>
<span>        w_final <span class="op">=</span> <span class="st">"rb050"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level1 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span></span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level2 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>                </span>
<span>        <span class="co"># strata variable</span></span>
<span>        H <span class="op">=</span> <span class="st">"db040"</span>, </span>
<span>        </span>
<span>        N_h <span class="op">=</span> <span class="cn">NULL</span> ,</span>
<span>        </span>
<span>        <span class="co"># clustering variable</span></span>
<span>        PSU <span class="op">=</span> <span class="st">"rb030"</span>, </span>
<span>        </span>
<span>        <span class="co"># data.table</span></span>
<span>        dataset <span class="op">=</span> <span class="va">dati</span>, </span>
<span>        </span>
<span>        <span class="co"># rmpg coefficient function</span></span>
<span>        type <span class="op">=</span> <span class="st">"linrmpg"</span>,</span>
<span>      </span>
<span>      <span class="co"># poverty threshold range</span></span>
<span>      order_quant <span class="op">=</span> <span class="fl">50L</span> ,</span>
<span>      </span>
<span>      <span class="co"># get linearized variable</span></span>
<span>      outp_lin <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        </span>
<span>    <span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># using our recommended setup</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the convey_prep function on it</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># coefficients do match</span></span>
<span><span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="co">#&gt; [1] 18.9286</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt; eqincome </span></span>
<span><span class="co">#&gt;  18.9286</span></span>
<span></span>
<span><span class="co"># linearized variables do match</span></span>
<span><span class="co"># vardpoor</span></span>
<span><span class="va">lin_rmpg_varpoord</span><span class="op">&lt;-</span> <span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">lin_out</span><span class="op">$</span><span class="va">lin_rmpg</span></span>
<span><span class="co"># convey </span></span>
<span><span class="va">lin_rmpg_convey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span>,<span class="st">"lin"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check equality</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">lin_rmpg_varpoord</span>, <span class="fl">100</span><span class="op">*</span><span class="va">lin_rmpg_convey</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># variances do not match exactly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">10000</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.332234</span></span>
<span><span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.3316454</span></span>
<span></span>
<span><span class="co"># standard errors do not match exactly</span></span>
<span><span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.5758866</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.5763974</span></span></code></pre></div>
<p>The variance estimate is computed by using the approximation defined
in @ref(eq:var), where the linearized variable <span class="math inline">\(z\)</span> is defined by @ref(eq:lin). The
functions <code><a href="../reference/svyrmpg.html">convey::svyrmpg</a></code> and
<code><a href="https://rdrr.io/pkg/vardpoor/man/linrmpg.html" class="external-link">vardpoor::linrmpg</a></code> produce the same linearized variable
<span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because
<code><a href="https://csblatvia.github.io/vardpoor/" class="external-link">library(vardpoor)</a></code> defaults to an ultimate cluster method
that can be replicated with an alternative setup of the
<code>survey.design</code> object.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># within each strata, sum up the weights</span></span>
<span><span class="va">cluster_sums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">rb050</span> , <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span> <span class="op">)</span> , <span class="va">sum</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">cluster_sums</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"db040"</span> , <span class="st">"cluster_sum"</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># merge this column back onto the data.frame</span></span>
<span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span> <span class="va">eusilc</span> , <span class="va">cluster_sums</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># with the fpc using the cluster sum</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span> , </span>
<span>        fpc <span class="op">=</span> <span class="op">~</span> <span class="va">cluster_sum</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">10000</span></span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.3316454</span></span>
<span><span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 0.3316454</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="va">varpoord_rmpg_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 0.5758866</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svyrmpg.html">svyrmpg</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt;           eqincome</span></span>
<span><span class="co">#&gt; eqincome 0.5758866</span></span></code></pre></div>
<p>For additional usage examples of <code>svyrmpg</code>, type
<code><a href="../reference/svyrmpg.html">?convey::svyrmpg</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="median-income-below-the-at-risk-of-poverty-threshold-svypoormed">Median Income Below the At Risk of Poverty Threshold
(svypoormed)<a class="anchor" aria-label="anchor" href="#median-income-below-the-at-risk-of-poverty-threshold-svypoormed"></a>
</h2>
<p>Median income below the at-risk-of-poverty- threshold (poormed) is
median of incomes of people having the income below the
<code>arpt</code>:</p>
<p><span class="math display">\[
poormed = median\{y_i; y_i&lt; arpt\}
\]</span> The details of the linearization of the <code>poormed</code>
are discussed by <span class="citation">Deville (1999)</span> and <span class="citation">Osier (2009)</span>.</p>
<hr>
<p><strong>A replication example</strong></p>
<p>The R <code>vardpoor</code> package <span class="citation">(Breidaks,
Liberts, and Ivanova 2016)</span>, created by researchers at the Central
Statistical Bureau of Latvia, includes a poormed coefficient calculation
using the ultimate cluster method. The example below reproduces those
statistics.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://csblatvia.github.io/vardpoor/" class="external-link">vardpoor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the vardpoor library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">laeken</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the synthetic EU statistics on income &amp; living conditions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make all column names lowercase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a column with the row number</span></span>
<span><span class="va">dati</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>IDd <span class="op">=</span> <span class="fl">1</span> <span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilc</span><span class="op">)</span>, <span class="va">eusilc</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate the poormed coefficient</span></span>
<span><span class="co"># using the R vardpoor library</span></span>
<span><span class="va">varpoord_poormed_calculation</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/vardpoor/man/varpoord.html" class="external-link">varpoord</a></span><span class="op">(</span></span>
<span>    </span>
<span>        <span class="co"># analysis variable</span></span>
<span>        Y <span class="op">=</span> <span class="st">"eqincome"</span>, </span>
<span>        </span>
<span>        <span class="co"># weights variable</span></span>
<span>        w_final <span class="op">=</span> <span class="st">"rb050"</span>,</span>
<span>        </span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level1 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span></span>
<span>        <span class="co"># row number variable</span></span>
<span>        ID_level2 <span class="op">=</span> <span class="st">"IDd"</span>,</span>
<span>                </span>
<span>        <span class="co"># strata variable</span></span>
<span>        H <span class="op">=</span> <span class="st">"db040"</span>, </span>
<span>        </span>
<span>        N_h <span class="op">=</span> <span class="cn">NULL</span> ,</span>
<span>        </span>
<span>        <span class="co"># clustering variable</span></span>
<span>        PSU <span class="op">=</span> <span class="st">"rb030"</span>, </span>
<span>        </span>
<span>        <span class="co"># data.table</span></span>
<span>        dataset <span class="op">=</span> <span class="va">dati</span>, </span>
<span>        </span>
<span>        <span class="co"># poormed coefficient function</span></span>
<span>        type <span class="op">=</span> <span class="st">"linpoormed"</span>,</span>
<span>      </span>
<span>      <span class="co"># poverty threshold range</span></span>
<span>      order_quant <span class="op">=</span> <span class="fl">50L</span> ,</span>
<span>      </span>
<span>      <span class="co"># get linearized variable</span></span>
<span>      outp_lin <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        </span>
<span>    <span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># using our recommended setup</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the convey_prep function on it</span></span>
<span><span class="va">des_eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># coefficients do match</span></span>
<span><span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">value</span></span>
<span><span class="co">#&gt; [1] 8803.735</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt; eqincome </span></span>
<span><span class="co">#&gt; 8803.735</span></span>
<span></span>
<span><span class="co"># linearized variables do match</span></span>
<span><span class="co"># vardpoor</span></span>
<span><span class="va">lin_poormed_varpoord</span><span class="op">&lt;-</span> <span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">lin_out</span><span class="op">$</span><span class="va">lin_poormed</span></span>
<span><span class="co"># convey </span></span>
<span><span class="va">lin_poormed_convey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span>,<span class="st">"lin"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check equality</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">lin_poormed_varpoord</span>, <span class="va">lin_poormed_convey</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># variances do not match exactly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome  5311.47</span></span>
<span><span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 5302.086</span></span>
<span></span>
<span><span class="co"># standard errors do not match exactly</span></span>
<span><span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 72.81542</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 72.87983</span></span></code></pre></div>
<p>The variance estimate is computed by using the approximation defined
in @ref(eq:var), where the linearized variable <span class="math inline">\(z\)</span> is defined by @ref(eq:lin). The
functions <code><a href="../reference/svypoormed.html">convey::svypoormed</a></code> and
<code><a href="https://rdrr.io/pkg/vardpoor/man/linpoormed.html" class="external-link">vardpoor::linpoormed</a></code> produce the same linearized variable
<span class="math inline">\(z\)</span>.</p>
<p>However, the measures of uncertainty do not line up, because
<code><a href="https://csblatvia.github.io/vardpoor/" class="external-link">library(vardpoor)</a></code> defaults to an ultimate cluster method
that can be replicated with an alternative setup of the
<code>survey.design</code> object.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># within each strata, sum up the weights</span></span>
<span><span class="va">cluster_sums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">rb050</span> , <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="va">eusilc</span><span class="op">$</span><span class="va">db040</span> <span class="op">)</span> , <span class="va">sum</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># name the within-strata sums of weights the `cluster_sum`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span> <span class="va">cluster_sums</span> <span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"db040"</span> , <span class="st">"cluster_sum"</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># merge this column back onto the data.frame</span></span>
<span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span> <span class="va">eusilc</span> , <span class="va">cluster_sums</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># construct a survey.design</span></span>
<span><span class="co"># with the fpc using the cluster sum</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> </span>
<span>        ids <span class="op">=</span> <span class="op">~</span> <span class="va">rb030</span> , </span>
<span>        strata <span class="op">=</span> <span class="op">~</span> <span class="va">db040</span> ,  </span>
<span>        weights <span class="op">=</span> <span class="op">~</span> <span class="va">rb050</span> , </span>
<span>        data <span class="op">=</span> <span class="va">eusilc</span> , </span>
<span>        fpc <span class="op">=</span> <span class="op">~</span> <span class="va">cluster_sum</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># again, immediately run the convey_prep function on the `survey.design`</span></span>
<span><span class="va">des_eusilc_ultimate_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> , <span class="st">'var'</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 5302.086</span></span>
<span><span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">var</span></span>
<span><span class="co">#&gt; [1] 5302.086</span></span>
<span></span>
<span><span class="co"># matches</span></span>
<span><span class="va">varpoord_poormed_calculation</span><span class="op">$</span><span class="va">all_result</span><span class="op">$</span><span class="va">se</span></span>
<span><span class="co">#&gt; [1] 72.81542</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/SE.html" class="external-link">SE</a></span><span class="op">(</span> <span class="fu"><a href="../reference/svypoormed.html">svypoormed</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">eqincome</span> , <span class="va">des_eusilc_ultimate_cluster</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;          eqincome</span></span>
<span><span class="co">#&gt; eqincome 72.81542</span></span></code></pre></div>
<p>For additional usage examples of <code>svypoormed</code>, type
<code><a href="../reference/svypoormed.html">?convey::svypoormed</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="foster-greer-thorbecke-class-svyfgt-svyfgtdec">Foster-Greer-Thorbecke class (svyfgt, svyfgtdec)<a class="anchor" aria-label="anchor" href="#foster-greer-thorbecke-class-svyfgt-svyfgtdec"></a>
</h2>
<p><span class="citation">Foster, Greer, and Thorbecke (1984)</span>
proposed a family of indicators to measure poverty. This class of <span class="math inline">\(FGT\)</span> measures, can be defined as</p>
<p><span class="math display">\[
p=\frac{1}{N}\sum_{k\in U}h(y_{k},\theta ),
\]</span></p>
<p>where</p>
<p><span class="math display">\[
h(y_{k},\theta )=\left[ \frac{(\theta -y_{k})}{\theta }\right] ^{\gamma
}\delta \left\{ y_{k}\leq \theta \right\} ,
\]</span></p>
<p>where: <span class="math inline">\(\theta\)</span> is the poverty
threshold; <span class="math inline">\(\delta\)</span> the indicator
function that assigns value <span class="math inline">\(1\)</span> if
the condition <span class="math inline">\(\{y_{k}\leq \theta \}\)</span>
is satisfied and <span class="math inline">\(0\)</span> otherwise, and
<span class="math inline">\(\gamma\)</span> is a non-negative
constant.</p>
<p>If <span class="math inline">\(\gamma =0\)</span>, the FGT(0) equals
the poverty headcount ratio, which accounts for the spread of poverty.
If <span class="math inline">\(\gamma =1\)</span>, FGT(1) is the mean of
the normalized income shortfall of the poor. By doing so, the measure
takes into account both the spread and the intensity of poverty. When
<span class="math inline">\(\gamma =2\)</span>, the relative weight of
larger shortfalls increases even more, which yields a measure that
accounts for poverty severity, i.e., the inequality among the poor. This
way, a transfer from a poor person to an even poorer person would reduce
the FGT(2).</p>
<p>Although <span class="citation">Foster, Greer, and Thorbecke
(1984)</span> already presented a decomposition for the FGT(2) index,
<span class="citation">Aristondo, De La Vega, and Urrutia (2010)</span>
provided a general formula that decomposes the FGT(<span class="math inline">\(\gamma\)</span>) for any <span class="math inline">\(\gamma \geqslant 2\)</span>. Put simply, any such
FGT(<span class="math inline">\(\gamma\)</span>) index can be seen as
function of the headcount ratio, the average normalized income gap among
the poor and a generalized entropy index of the normalized income gaps
among poor. In mathematical terms,</p>
<p><span class="math display">\[
FGT_\gamma = FGT_0 \cdot I^\gamma \cdot \big[ 1 + \big( \gamma^2 -\gamma
\big) GEI_\gamma^* \big] , \text{ } \gamma \geq 2
\]</span></p>
<p>where <span class="math inline">\(I\)</span> is the average
normalized income gap among the poor and <span class="math inline">\(GEI_\gamma^*\)</span> is a generalized entropy
index of such income gaps among the poor.</p>
<p>This result is particularly useful, as one can attribute
cross-sectional differences of a FGT index to differences in the spread,
depth and inequality of poverty.</p>
<p>The FGT poverty class and its decomposition is implemented in the
library convey by the function <code>svyfgt</code> and
<code>svyfgtdec</code>, respectively. The argument
<code>thresh_type</code> of this function defines the type of poverty
threshold adopted. There are three possible choices:</p>
<ol style="list-style-type: decimal">
<li>
<code>abs</code> – fixed and given by the argument thresh_value</li>
<li>
<code>relq</code> – a proportion of a quantile fixed by the argument
<code>proportion</code> and the quantile is defined by the argument
<code>order</code>.</li>
<li>
<code>relm</code> – a proportion of the mean fixed the argument
<code>proportion</code>
</li>
</ol>
<p>The quantile and the mean involved in the definition of the threshold
are estimated for the whole population. When <span class="math inline">\(\gamma=0\)</span> and <span class="math inline">\(\theta= .6*MED\)</span> the measure is equal to
the indicator <code>arpr</code> computed by the function
<code>svyarpr</code>. The linearization of the FGT(0) is presented in
<span class="citation">Berger and Skinner (2003)</span>.</p>
<p>Next, we give some examples of the function <code>svyfgt</code> to
estimate the values of the FGT poverty index.</p>
<p>Consider first the poverty threshold fixed (<span class="math inline">\(\gamma=0\)</span>) in the value <span class="math inline">\(10000\)</span>. The headcount ratio (FGT0) is</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">svyfgt</span>(<span class="sc">~</span>eqincome, des_eusilc, <span class="at">g=</span><span class="dv">0</span>, <span class="at">abs_thresh=</span><span class="dv">10000</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>            fgt0     SE</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>eqincome <span class="fl">0.11444</span> <span class="fl">0.0027</span></span></code></pre></div>
<p>The poverty gap ratio (FGT(1)) (<span class="math inline">\(\gamma=1\)</span>) index for the poverty threshold
fixed at the same value is</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">svyfgt</span>(<span class="sc">~</span>eqincome, des_eusilc, <span class="at">g=</span><span class="dv">1</span>, <span class="at">abs_thresh=</span><span class="dv">10000</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>             fgt1     SE</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>eqincome <span class="fl">0.032085</span> <span class="fl">0.0011</span></span></code></pre></div>
<p>To estimate the FGT(0) with the poverty threshold fixed at <span class="math inline">\(0.6* MED\)</span> we fix the argument
<code>type_thresh="relq"</code> and use the default values for
<code>percent</code> and <code>order</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">svyfgt</span>(<span class="sc">~</span>eqincome, des_eusilc, <span class="at">g=</span><span class="dv">0</span>, <span class="at">type_thresh=</span> <span class="st">"relq"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>            fgt0     SE</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>eqincome <span class="fl">0.14444</span> <span class="fl">0.0028</span></span></code></pre></div>
<p>that matches the estimate obtained by</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">svyarpr</span>(<span class="sc">~</span>eqincome, <span class="at">design=</span>des_eusilc, .<span class="dv">5</span>, .<span class="dv">6</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>            arpr     SE</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>eqincome <span class="fl">0.14444</span> <span class="fl">0.0028</span></span></code></pre></div>
<p>To estimate the poverty gap ratio with the poverty threshold equal to
<span class="math inline">\(0.6*MEAN\)</span>, we use:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">svyfgt</span>(<span class="sc">~</span>eqincome, des_eusilc, <span class="at">g=</span><span class="dv">1</span>, <span class="at">type_thresh=</span> <span class="st">"relm"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>             fgt1     SE</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>eqincome <span class="fl">0.051187</span> <span class="fl">0.0011</span></span></code></pre></div>
<hr>
<p><strong>A replication example</strong></p>
<p>In July 2006, <span class="citation">Jenkins (2008)</span> presented
at the North American Stata Users’ Group Meetings on the stata Atkinson
Index command. The example below reproduces those statistics.</p>
<p>In order to match the presentation’s results using the
<code>svyfgt</code> function from the convey library, the poverty
threshold was considered absolute despite being directly estimated from
the survey sample. This effectively treats the variance of the estimated
poverty threshold as zero; <code>svyfgt</code> does not account for the
uncertainty of the poverty threshold when the level has been stated as
absolute with the <code>abs_thresh=</code> parameter. In general, we
would instead recommend using either <code>relq</code> or
<code>relm</code> in the <code>type_thresh=</code> parameter in order to
account for the added uncertainty of the poverty threshold calculation.
This example serves only to show that <code>svyfgt</code> behaves
properly as compared to other software.</p>
<p>Load and prepare the same data set:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the convey package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://guilhermejacob.github.io/context/" class="external-link">convey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the survey library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the foreign library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://svn.r-project.org/R-packages/trunk/foreign/" class="external-link">foreign</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a temporary file on the local disk</span></span>
<span><span class="va">tf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># store the location of the presentation file</span></span>
<span><span class="va">presentation_zip</span> <span class="op">&lt;-</span> <span class="st">"http://repec.org/nasug2006/nasug2006_jenkins.zip"</span></span>
<span></span>
<span><span class="co"># download jenkins' presentation to the temporary file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span> <span class="va">presentation_zip</span> , <span class="va">tf</span> , mode <span class="op">=</span> <span class="st">'wb'</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># unzip the contents of the archive</span></span>
<span><span class="va">presentation_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span> <span class="va">tf</span> , exdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># load the institute for fiscal studies' 1981, 1985, and 1991 data.frame objects</span></span>
<span><span class="va">x81</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreign/man/read.dta.html" class="external-link">read.dta</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span> <span class="st">"ifs81"</span> , <span class="va">presentation_files</span> , value <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="va">x85</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreign/man/read.dta.html" class="external-link">read.dta</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span> <span class="st">"ifs85"</span> , <span class="va">presentation_files</span> , value <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="va">x91</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreign/man/read.dta.html" class="external-link">read.dta</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span> <span class="st">"ifs91"</span> , <span class="va">presentation_files</span> , value <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># NOTE: we recommend using ?convey::svyarpt rather than this unweighted calculation #</span></span>
<span></span>
<span><span class="co"># calculate 60% of the unweighted median income in 1981</span></span>
<span><span class="va">unwtd_arpt81</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span> <span class="va">x81</span><span class="op">$</span><span class="va">eybhc0</span> , <span class="fl">0.5</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">.6</span></span>
<span></span>
<span><span class="co"># calculate 60% of the unweighted median income in 1985</span></span>
<span><span class="va">unwtd_arpt85</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span> <span class="va">x85</span><span class="op">$</span><span class="va">eybhc0</span> , <span class="fl">0.5</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">.6</span></span>
<span></span>
<span><span class="co"># calculate 60% of the unweighted median income in 1991</span></span>
<span><span class="va">unwtd_arpt91</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span> <span class="va">x91</span><span class="op">$</span><span class="va">eybhc0</span> , <span class="fl">0.5</span> <span class="op">)</span> <span class="op">*</span> <span class="fl">.6</span></span>
<span></span>
<span><span class="co"># stack each of these three years of data into a single data.frame</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span> <span class="va">x81</span> , <span class="va">x85</span> , <span class="va">x91</span> <span class="op">)</span></span></code></pre></div>
<p>Replicate the author’s survey design statement from stata code..</p>
<pre><code>. ge poor = (year==1981)*(x &lt; $z_81) + (year==1985)*(x &lt; $z_85) +  (year==1991)*(x &lt; $z_91)
. * account for clustering within HHs 
. svyset hrn [pweight = wgt]</code></pre>
<p>.. into R code:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># initiate a linearized survey design object</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">hrn</span> , data <span class="op">=</span> <span class="va">x</span> , weights <span class="op">=</span> <span class="op">~</span> <span class="va">wgt</span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># immediately run the `convey_prep` function on the survey design</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convey_prep.html">convey_prep</a></span><span class="op">(</span> <span class="va">y</span> <span class="op">)</span></span></code></pre></div>
<p>Replicate the author’s headcount ratio results with stata..</p>
<pre><code>. svy: mean poor if year == 1981
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1          Number of obs    =    9772
Number of PSUs   =    7476          Population size  = 5.5e+07
                                    Design df        =    7475

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
        poor |   .1410125   .0044859       .132219     .149806
--------------------------------------------------------------

. svy: mean poor if year == 1985
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1          Number of obs    =    8991
Number of PSUs   =    6972          Population size  = 5.5e+07
                                    Design df        =    6971

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
        poor |    .137645   .0046531      .1285235    .1467665
--------------------------------------------------------------

. svy: mean poor if year == 1991
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1          Number of obs    =    6468
Number of PSUs   =    5254          Population size  = 5.6e+07
                                    Design df        =    5253

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
        poor |   .2021312   .0062077      .1899615    .2143009
--------------------------------------------------------------</code></pre>
<p>..using R code:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">headcount_81</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="../reference/svyfgt.html">svyfgt</a></span><span class="op">(</span> </span>
<span>        <span class="op">~</span> <span class="va">eybhc0</span> , </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1981</span> <span class="op">)</span> , </span>
<span>        g <span class="op">=</span> <span class="fl">0</span> , </span>
<span>        abs_thresh <span class="op">=</span> <span class="va">unwtd_arpt81</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">headcount_81</span></span>
<span><span class="co">#&gt;           fgt0     SE</span></span>
<span><span class="co">#&gt; eybhc0 0.14101 0.0045</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span> <span class="va">headcount_81</span> , df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html" class="external-link">degf</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1981</span> <span class="op">)</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;            2.5 %    97.5 %</span></span>
<span><span class="co">#&gt; eybhc0 0.1322193 0.1498057</span></span>
<span></span>
<span><span class="va">headcount_85</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="../reference/svyfgt.html">svyfgt</a></span><span class="op">(</span> </span>
<span>        <span class="op">~</span> <span class="va">eybhc0</span> , </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1985</span> <span class="op">)</span> , </span>
<span>        g <span class="op">=</span> <span class="fl">0</span> , </span>
<span>        abs_thresh <span class="op">=</span> <span class="va">unwtd_arpt85</span> </span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span><span class="va">headcount_85</span></span>
<span><span class="co">#&gt;           fgt0     SE</span></span>
<span><span class="co">#&gt; eybhc0 0.13764 0.0047</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span> <span class="va">headcount_85</span> , df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html" class="external-link">degf</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1985</span> <span class="op">)</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;            2.5 %    97.5 %</span></span>
<span><span class="co">#&gt; eybhc0 0.1285239 0.1467661</span></span>
<span></span>
<span><span class="va">headcount_91</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="../reference/svyfgt.html">svyfgt</a></span><span class="op">(</span> </span>
<span>        <span class="op">~</span> <span class="va">eybhc0</span> , </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1991</span> <span class="op">)</span> , </span>
<span>        g <span class="op">=</span> <span class="fl">0</span> , </span>
<span>        abs_thresh <span class="op">=</span> <span class="va">unwtd_arpt91</span> </span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">headcount_91</span></span>
<span><span class="co">#&gt;           fgt0     SE</span></span>
<span><span class="co">#&gt; eybhc0 0.20213 0.0062</span></span>
<span>    </span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span> <span class="va">headcount_91</span> , df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html" class="external-link">degf</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1991</span> <span class="op">)</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;            2.5 % 97.5 %</span></span>
<span><span class="co">#&gt; eybhc0 0.1899624 0.2143</span></span></code></pre></div>
<p>Confirm this replication applies for the normalized poverty gap as
well, comparing stata code..</p>
<pre><code>. ge ngap = poor*($z_81- x)/$z_81 if year == 1981

. svy: mean ngap if year == 1981
(running mean on estimation sample)

Survey: Mean estimation

Number of strata =       1          Number of obs    =    9772
Number of PSUs   =    7476          Population size  = 5.5e+07
                                    Design df        =    7475

--------------------------------------------------------------
             |             Linearized
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
        ngap |   .0271577   .0013502      .0245109    .0298044
--------------------------------------------------------------</code></pre>
<p>..to R code:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">norm_pov_81</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="../reference/svyfgt.html">svyfgt</a></span><span class="op">(</span> </span>
<span>        <span class="op">~</span> <span class="va">eybhc0</span> , </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1981</span> <span class="op">)</span> , </span>
<span>        g <span class="op">=</span> <span class="fl">1</span> , </span>
<span>        abs_thresh <span class="op">=</span> <span class="va">unwtd_arpt81</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span><span class="va">norm_pov_81</span></span>
<span><span class="co">#&gt;            fgt1     SE</span></span>
<span><span class="co">#&gt; eybhc0 0.027158 0.0014</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span> <span class="va">norm_pov_81</span> , df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svychisq.html" class="external-link">degf</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span> <span class="va">z</span> , <span class="va">year</span> <span class="op">==</span> <span class="fl">1981</span> <span class="op">)</span> <span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt;             2.5 %     97.5 %</span></span>
<span><span class="co">#&gt; eybhc0 0.02451106 0.02980428</span></span></code></pre></div>
<p>For additional usage examples of <code>svyfgt</code>, type
<code><a href="../reference/svyfgt.html">?convey::svyfgt</a></code> in the R console.</p>
</div>
<div class="section level2">
<h2 id="watts-poverty-measure-svywatts-svywattsdec">Watts poverty measure (svywatts, svywattsdec)<a class="anchor" aria-label="anchor" href="#watts-poverty-measure-svywatts-svywattsdec"></a>
</h2>
<p>The measure proposed in <span class="citation">Watts (1968)</span>
satisfies a number of desirable poverty measurement axioms and is known
to be one of the first distribution-sensitive poverty measures, as noted
by <span class="citation">Haughton and Khandker (2009)</span>. It is
defined as</p>
<p><span class="math display">\[
Watts = \frac{1}{N} \sum_{i \in U} \log{ \bigg( \frac{y_i}{\theta}
\bigg) \delta ( y_i \leqslant \theta) }.
\]</span></p>
<p><span class="citation">Morduch (1998)</span> points out that the
Watts poverty index can provide an estimate of the expected time to exit
poverty. Given the expected growth rate of income per capita among the
poor, <span class="math inline">\(g\)</span>, the expected time taken to
exit poverty <span class="math inline">\(T_\theta\)</span> would be</p>
<p><span class="math display">\[
T_\theta = \frac{Watts}{g}.
\]</span></p>
<p>The Watts poverty index also has interesting decomposition
properties. <span class="citation">Blackburn (1989)</span> proposed a
decomposition for the Watts poverty index, rewriting it in terms of the
headcount ratio, the Watts poverty gap ratio and the mean log deviaton
of poor incomes<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Mathematically,</p>
<p><span class="math display">\[
Watts = FGT_0 \big( I_w + L_* \big)
\]</span></p>
<p>where <span class="math inline">\(I_w = \log(\theta/\mu_*)\)</span>
is the Watts poverty gap ratio<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> and <span class="math inline">\(L_*\)</span> is the mean log deviation of incomes
among the poor. This can be estimated using the <code>svywattsdec</code>
function.</p>
<p>This result can also be interpreted as a decomposition of the time
taken to exit poverty, since</p>
<p><span class="math display">\[
\begin{aligned}
T_\theta &amp;= \frac{Watts}{g} \\
&amp;= \frac{FGT_0}{g} \big( I_w + L_* \big)
\end{aligned}
\]</span></p>
<p>As <span class="citation">Morduch (1998)</span> points out, if the
income among the poor is equally distributed (i.e., <span class="math inline">\(L_*=0\)</span>), the time taken to exit poverty is
simply <span class="math inline">\(FGT_0 I_w / g\)</span>. Therefore,
<span class="math inline">\(FGT_0 L_* / g\)</span> can be seen as the
additional time needed to exit poverty as a result of the inequality
among the poor.</p>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-aristondo2010" class="csl-entry">
Aristondo, Oihana, Casilda Lasso De La Vega, and Ana Urrutia. 2010.
<span>“A New Multiplicative Decomposition for the Foster–Greer–Thorbecke
Poverty Indices.”</span> <em>Bulletin of Economic Research</em> 62 (3):
259–67. <a href="https://doi.org/10.1111/j.1467-8586.2009.00320.x" class="external-link">https://doi.org/10.1111/j.1467-8586.2009.00320.x</a>.
</div>
<div id="ref-bedi2007" class="csl-entry">
Bedi, Tara, Aline Coudouel, and Kenneth Simler. 2007. <em>More Than a
Pretty Picture: Using Poverty Maps to Design Better Policies and
Interventions</em>. World Bank Publications.
</div>
<div id="ref-berger2003" class="csl-entry">
Berger, Yves G., and Chris J. Skinner. 2003. <span>“Variance Estimation
for a Low Income Proportion.”</span> <em>Journal of the Royal
Statistical Society: Series C (Applied Statistics)</em> 52 (4): 457–68.
<a href="https://doi.org/10.1111/1467-9876.00417" class="external-link">https://doi.org/10.1111/1467-9876.00417</a>.
</div>
<div id="ref-bhat2007" class="csl-entry">
Bhattacharya, Debopam. 2007. <span>“Inference on Inequality from
Household Survey Data.”</span> <em>Journal of Econometrics</em> 137. <a href="https://doi.org/10.1016/j.jeconom.2005.09.003" class="external-link">https://doi.org/10.1016/j.jeconom.2005.09.003</a>.
</div>
<div id="ref-blackburn1989" class="csl-entry">
Blackburn, McKinley L. 1989. <span>“Poverty Measurement: An Index
Related to a Theil Measure of Inequality.”</span> <em>Journal of
Business &amp; Economic Statistics</em> 7 (4): 475–81. <a href="https://doi.org/10.1080/07350015.1989.10509760" class="external-link">https://doi.org/10.1080/07350015.1989.10509760</a>.
</div>
<div id="ref-vardpoor" class="csl-entry">
Breidaks, Juris, Martins Liberts, and Santa Ivanova. 2016.
<span>“Vardpoor: Estimation of Indicators on Social Exclusion and
Poverty and Its Linearization, Variance Estimation.”</span> Riga,
Latvia: CSB.
</div>
<div id="ref-deaton1997" class="csl-entry">
Deaton, Angus. 1997. <em>The Analysis of Household Surveys: A
Microeconomic Approach to Development Policy</em>. World Bank
Publications.
</div>
<div id="ref-deville1999" class="csl-entry">
Deville, Jean-Claude. 1999. <span>“Variance Estimation for Complex
Statistics and Estimators: Linearization and Residual
Techniques.”</span> <em>Survey Methodology</em> 25 (2): 193–203. <a href="http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf" class="external-link">http://www.statcan.gc.ca/pub/12-001-x/1999002/article/4882-eng.pdf</a>.
</div>
<div id="ref-elbers2003" class="csl-entry">
Elbers, Chris, Jean O. Lanjouw, and Peter Lanjouw. 2003.
<span>“Micro–Level Estimation of Poverty and Inequality.”</span>
<em>Econometrica</em> 71. <a href="https://doi.org/10.1111/1468-0262.00399" class="external-link">https://doi.org/10.1111/1468-0262.00399</a>.
</div>
<div id="ref-foster1984" class="csl-entry">
Foster, James, Joel Greer, and Erik Thorbecke. 1984. <span>“A Class of
Decomposable Poverty Measures.”</span> <em>Econometrica</em> 52 (3):
761–66. <a href="http://www.jstor.org/stable/1913475" class="external-link">http://www.jstor.org/stable/1913475</a>.
</div>
<div id="ref-haughton2009" class="csl-entry">
Haughton, Jonathan, and Shahidur Khandker. 2009. <em>Handbook on Poverty
and Inequality</em>. World Bank Training Series. World Bank
Publications. <a href="https://openknowledge.worldbank.org/bitstream/handle/10986/11985/9780821376133.pdf" class="external-link">https://openknowledge.worldbank.org/bitstream/handle/10986/11985/9780821376133.pdf</a>.
</div>
<div id="ref-jenkins2006" class="csl-entry">
Jenkins, Stephen. 2008. <span>“Estimation and Interpretation of Measures
of Inequality, Poverty, and Social Welfare Using Stata.”</span> North
American Stata Users' Group Meetings 2006. Stata Users Group. <a href="http://EconPapers.repec.org/RePEc:boc:asug06:16" class="external-link">http://EconPapers.repec.org/RePEc:boc:asug06:16</a>.
</div>
<div id="ref-murdoch1998" class="csl-entry">
Morduch, Jonathan. 1998. <span>“Poverty, Economic Growth, and Average
Exit Time.”</span> <em>Economics Letters</em> 59 (3): 385–90.
https://doi.org/<a href="https://doi.org/10.1016/S0165-1765(98)00070-6" class="external-link">https://doi.org/10.1016/S0165-1765(98)00070-6</a>.
</div>
<div id="ref-osier2009" class="csl-entry">
Osier, Guillaume. 2009. <span>“Variance Estimation for Complex
Indicators of Poverty and Inequality.”</span> <em>Journal of the
European Survey Research Association</em> 3 (3): 167–95. <a href="http://ojs.ub.uni-konstanz.de/srm/article/view/369" class="external-link">http://ojs.ub.uni-konstanz.de/srm/article/view/369</a>.
</div>
<div id="ref-ravallion2016" class="csl-entry">
Ravallion, Martin. 2016. <em>The Economics of Poverty: History,
Measurement and Policy</em>. 1st ed. New York, USA: Oxford University
Press.
</div>
<div id="ref-watts1968" class="csl-entry">
Watts, Harold W. 1968. <span>“An Economic Definition of Poverty.”</span>
Discussion Papers 5. Institute For Research on Poverty. <a href="https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf" class="external-link">https://www.irp.wisc.edu/publications/dps/pdfs/dp568.pdf</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>For instance, see <span class="citation">Deville
(1999)</span>, <span class="citation">Berger and Skinner (2003)</span>,
<span class="citation">Bhattacharya (2007)</span>, and <span class="citation">Osier (2009)</span>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The mean log deviation (also known as Theil-L or
Bourguignon-Theil index) is an inequality measure of the generalized
entropy class. The family of generalized entropy indices is discussed in
the next chapter.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p> <span class="math inline">\(\mu_*\)</span> stands for
the average income among the poor.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Djalma Pessoa, Anthony Damico, Guilherme Jacob.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
